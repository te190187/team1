<html xmlns:th="http://www.thymeleaf.org">
  <head th:replace="common/head :: common_header(~{::title}, ~{}, ~{})">
    <title>教室予約</title>
  </head>
  <body>
    <th:block th:replace="common/nav::nav" />

    <form
      th:action="@{/classReservations}" 
      th:object="${classReservationForm}"
      method="get"
    >
      <input type="month" name="yearMonth">
      <button type="submit" >表示</button>
    </form>

    <h3 class="mt-3 ms-3">[[${reservation.yearMonth.format(yearMonthFormatter)}]]</h3>
    <div class="d-flex flex-wrap ms-3">
      <div th:each="date: ${reservation.reservationDates}" class="border-top border-start border-dark m-1 ">
        <div 
          class="border-bottom border-end border-dark d-flex justify-content-center"
          th:classappend="${(date.isSaturday ? 'bg-primary text-white' : '') + (date.isSunday ? 'bg-danger text-white' : '')}"
        >[[${date.date.format(formatter)}]]</div>
        <div class="d-flex">
          <div class="border-end border-dark">
            <div class="border-bottom border-dark">&nbsp;</div>
            <div th:each="classroom: ${classrooms}" class="border-bottom border-dark">
              [[${classroom.getName()}]]
            </div>
          </div>
          <div class="d-flex">
            <div
              th:each="frame: ${date.frames}"
              class="d-flex flex-column align-items-center border-end border-dark"
            >
              <div class="border-dark border-bottom w-100">[[${frame.frame.getTime()}]]</div>
              <div th:each="classroom: ${frame.classrooms}" class="border-bottom border-dark w-100">
                <div th:if="${classroom.subject != null}">
                  [[${classroom.grade.getGrade_name()}]]/[[${classroom.teacher.getName()}]]/[[${classroom.subject.getName()}]]/[[${classroom.studentNames.size()}]]
                </div>
                <div th:if="${classroom.subject == null}" class="w-100">&nbsp;</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
